# Mosquitto 本地+WebSocket+阿里云桥接配置示例

# 本地 WebSocket 监听端口
listener 9001
protocol websockets

# 本地 TCP 监听端口（可选）
listener 1883
protocol mqtt

# 桥接到阿里云 TCP 1883
connection aliyun
address <阿里云TCP接入点>:1883
# 例如 i0skgstk2Ek.iot-as-mqtt.cn-shanghai.aliyuncs.com:1883

# 只同步你关心的主题，# 表示全量（建议实际业务只同步部分）
topic # both 0

# 下面三项用 Node.js 生成的三元组填入
remote_username <username>
remote_password <password>
clientid <clientId>

# 如果用 8883 TLS，需加：
# bridge_cafile aliyun-root-ca.crt
# address <阿里云TCP接入点>:8883

# 保持连接
keepalive_interval 60
restart_timeout 10
cleansession true

# 日志
log_dest file mosquitto.log
log_type all

# 允许匿名本地连接
allow_anonymous true
