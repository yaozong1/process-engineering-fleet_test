# 15分钟无活动自动登出 - 测试指南

## ? **功能说明**

现在系统已经实现了真正的"无活动自动登出"功能：

### ? **工作原理**

1. **活动检测**: 监听用户的鼠标移动、键盘输入、点击、滚动等操作
2. **倒计时机制**: 从最后一次活动开始计算15分钟
3. **警告提醒**: 在剩余2分钟时显示警告弹窗
4. **自动登出**: 15分钟无任何活动后自动登出

### ? **时间设置**

- **默认超时**: 15分钟无活动
- **警告时间**: 剩余2分钟时显示
- **检查频率**: 每1分钟检查一次
- **活动类型**: 鼠标移动、点击、键盘输入、页面滚动

### ? **快速测试方法**

如果想立即测试，可以临时修改超时时间：

1. 打开 `src/app/page.tsx`
2. 找到 `timeoutMinutes: 15` 
3. 改为 `timeoutMinutes: 2` (2分钟测试)
4. 重启服务器

### ? **使用体验**

- **正常使用**: 只要有任何操作，会话就会重置
- **离开键盘**: 15分钟后自动登出
- **警告提示**: 最后2分钟会显示黄色警告框
- **延长会话**: 点击"继续会话"按钮重置计时器
- **优雅登出**: 自动清理认证状态并跳转登录页

### ? **安全特性**

- ? 客户端活动监控 (鼠标、键盘、滚动)
- ? 服务器端会话验证
- ? 自动会话延期机制
- ? 优雅的用户提醒
- ? 完全清理登出状态

### ? **智能机制**

- **节流控制**: 避免过于频繁的活动更新 (1秒内最多更新1次)
- **多种活动**: 监听所有可能的用户交互
- **背景检查**: 定期验证会话有效性
- **用户友好**: 提前警告，允许延长会话

现在你的系统实现了真正的"无活动15分钟自动登出"功能！